<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Be My Valentine ğŸ’œ</title>

<style>
:root{
  --bg1:#1b0b2e; --bg2:#3a0a63;
  --card:#ffffff12; --card2:#ffffff1f;
  --text:#f6edff; --muted:#e9d9ff;
  --yes:#b65cff; --yes2:#7d2aff;
  --no:#ffffff22; --no2:#ffffff33;
  --shadow:0 18px 50px rgba(0,0,0,.35);
}

*{ box-sizing:border-box; }
body{
  margin:0; min-height:100svh;
  display:flex; align-items:center; justify-content:center;
  color:var(--text);
  font-family: ui-rounded, system-ui, Segoe UI, Roboto, Arial;
  background:
    radial-gradient(1200px 800px at 15% 20%, #7c2cff44, transparent 55%),
    radial-gradient(900px 700px at 85% 30%, #ff63d744, transparent 60%),
    linear-gradient(135deg, var(--bg1), var(--bg2));
  overflow:hidden; padding:24px;
  transition: background 0.5s;
}

/* Floating hearts */
.float-heart{
  position:absolute; left:var(--x); top:110%;
  font-size: var(--s); opacity:.18;
  animation: rise var(--d) linear infinite;
  filter: blur(.2px); user-select:none; pointer-events:none;
}
@keyframes rise{
  0%{ transform:translateY(0) rotate(0deg); }
  100%{ transform:translateY(-140vh) rotate(360deg); }
}

/* Card */
.card{
  width:min(720px,95vw);
  background: linear-gradient(180deg, var(--card), var(--card2));
  border:1px solid #ffffff26;
  border-radius:26px;
  box-shadow:var(--shadow);
  padding:28px 22px;
  backdrop-filter: blur(10px);
  position:relative;
  text-align:center;
}

h1{margin:14px 0 10px; font-size:clamp(28px,4vw,44px); line-height:1.05;}
.sub{margin:0 0 18px; color: var(--muted); font-size: clamp(14px,2vw,18px); line-height:1.5;}
.badge{display:inline-flex; align-items:center; gap:10px; padding:10px 14px; border-radius:999px; border:1px solid #ffffff28; background:#ffffff10; font-weight:600; letter-spacing:.3px;}

.prompt{margin-top:14px; background:#ffffff0e; border:1px solid #ffffff1f; padding:14px; border-radius:18px; position:relative;}
.message{min-height:1.8em; margin:10px 0 0; font-weight:700; letter-spacing:.2px; color:#ffe8ff; text-shadow:0 10px 25px rgba(0,0,0,.25);}
.btn-row{
  display:flex; flex-wrap:wrap; gap:12px; margin-top:16px;
  justify-content:center; align-items:center;
  min-height:64px;
}
button{
  border:0; border-radius:16px; padding:14px 18px;
  font-size:16px; font-weight:800; cursor:pointer;
  transition: transform .12s ease, filter .12s ease, opacity .12s ease;
  color: var(--text); outline:none; user-select:none;
}
button:active{ transform: scale(.98); }
.yes{background: linear-gradient(135deg,var(--yes),var(--yes2)); box-shadow:0 14px 30px rgba(182,92,255,.35);}
.yes:hover{ filter:brightness(1.07); }
.no{background: linear-gradient(135deg,var(--no),var(--no2)); border:1px solid #ffffff26;}
.no:hover{ filter:brightness(1.08); }
.tiny{display:block; margin-top:8px; color:#f0e3ffb3; font-size:12.5px;}

.success{
  margin-top:16px; padding:16px;
  border-radius:18px;
  background: linear-gradient(180deg, #b65cff22, #ff63d722);
  border:1px solid #ffffff2a;
  text-align:center;
}

/* Make the NO button movable smoothly */
#noBtn{
  position: relative;
  will-change: transform;
  transition: transform 120ms ease;
}

/* Pop hearts confetti */
.pop-heart{
  position:fixed; left:var(--px); top:var(--py);
  font-size:var(--ps); pointer-events:none;
  animation: pop 900ms ease-out forwards;
  filter: drop-shadow(0 10px 18px rgba(0,0,0,.25));
}
@keyframes pop{
  0%{transform:translate(-50%,-50%) scale(.9);opacity:0;}
  15%{opacity:1;}
  100%{transform:translate(calc(-50% + var(--dx)), calc(-50% + var(--dy))) rotate(var(--rot)) scale(1.25); opacity:0;}
}

/* Screen shake */
@keyframes shake {
  0%   { transform: translateX(0); }
  20%  { transform: translateX(-6px); }
  40%  { transform: translateX(6px); }
  60%  { transform: translateX(-4px); }
  80%  { transform: translateX(4px); }
  100% { transform: translateX(0); }
}
.card.shake{
  animation: shake 220ms ease-in-out;
}
@media (prefers-reduced-motion: reduce){
  .card.shake{ animation:none; }
  .pop-heart{ animation:none; }
  .float-heart{ animation:none; }
}

/* Stages */
.stage {
  display: none;
  opacity: 0;
  transition: opacity 0.45s ease;
}
.stage.active {
  display: block;
  opacity: 1;
}
</style>
</head>

<body>
<!-- soft floating hearts -->
<div class="float-heart" style="--x:8%;--s:18px;--d:14s;">ğŸ’œ</div>
<div class="float-heart" style="--x:18%;--s:24px;--d:18s;">ğŸ’Ÿ</div>
<div class="float-heart" style="--x:32%;--s:16px;--d:16s;">ğŸ’œ</div>
<div class="float-heart" style="--x:46%;--s:22px;--d:20s;">ğŸ’–</div>
<div class="float-heart" style="--x:60%;--s:18px;--d:15s;">ğŸ’œ</div>
<div class="float-heart" style="--x:74%;--s:26px;--d:22s;">ğŸ’˜</div>
<div class="float-heart" style="--x:88%;--s:17px;--d:17s;">ğŸ’œ</div>

<main class="card" id="card">
  <!-- Stage 1 -->
  <div class="stage active" id="stage1">
    <h1>Soâ€¦ what do you think this is all about? ğŸ¤”ğŸ‘€</h1>
    <p class="sub">Take a guessâ€¦ najua unakuwanga msmart!</p>
    <button class="yes" id="btn1">Letâ€™s find out ğŸ‘€ğŸ‘€</button>
  </div>

  <!-- Stage 2 -->
  <div class="stage" id="stage2">
    <h1>Wacha sasa nikuambiee, waahâ€¦ ğŸ˜Œâœ¨</h1>
    <button class="yes" id="btn2">Enhe ğŸ‘€ğŸ‘€</button>
  </div>

  <!-- Stage 3 -->
  <div class="stage" id="stage3">
    <h1>Soooooâ€¦ ğŸ‘€ğŸ˜˜</h1>
    <button class="yes" id="btn3">What?? ğŸ’œ</button>
  </div>

  <!-- Stage 4 -->
  <div class="stage" id="stage4">
    <h1>Ashleyyyyyyyâ€¦ ğŸ‘€ğŸ˜˜</h1>
    <button class="yes" id="btn4">Niambie Kababaa?? ğŸ’œ</button>
  </div>

  <!-- Stage 5 -->
  <div class="stage" id="stage5">
    <span class="badge">ğŸ’œ Good Vibes</span>
    <h1>Will you be my Valentine, Kababyyy?? ğŸ’˜</h1>
    <p class="sub">Iâ€™m officially applying for the position of your Valentine ğŸ˜Œâœ¨</p>

    <div class="prompt">
      <div id="message" class="message" aria-live="polite"></div>

      <div class="btn-row" id="buttons">
        <button class="yes" id="yesBtn">Yes ğŸ’œ</button>
        <button class="no" id="noBtn">No ğŸ˜</button>
      </div>

      <span class="tiny" id="psText">P.S. "No" inafinyika huskiiâ€¦</span>
    </div>
  </div>

  <!-- Stage 6 -->
  <div class="stage" id="stage6">
    <div class="success" id="successBox"></div>
  </div>
</main>

<script>
/* ---------- Stage navigation with fade-in ---------- */
const stageIds = ["stage1","stage2","stage3","stage4","stage5","stage6"];

function showStage(id){
  stageIds.forEach(s => {
    const el = document.getElementById(s);
    if(!el) return;
    if(s === id){
      el.style.display = "block"; // Ensure visible for transition
      requestAnimationFrame(()=> el.classList.add("active"));
    } else {
      el.classList.remove("active");
      setTimeout(()=> { if(!el.classList.contains("active")) el.style.display="none"; }, 450);
    }
  });
}

document.getElementById("btn1").addEventListener("click", ()=> showStage("stage2"));
document.getElementById("btn2").addEventListener("click", ()=> showStage("stage3"));
document.getElementById("btn3").addEventListener("click", ()=> showStage("stage4"));
document.getElementById("btn4").addEventListener("click", ()=> showStage("stage5"));

/* ---------- Hearts pop ---------- */
function heartPop(x,y){
  const hearts=["ğŸ’œ","ğŸ’Ÿ","ğŸ’–","ğŸ’˜","âœ¨"];
  for(let i=0;i<18;i++){
    const h=document.createElement("div");
    h.className="pop-heart";
    h.textContent=hearts[Math.floor(Math.random()*hearts.length)];
    h.style.setProperty("--px",x+"px");
    h.style.setProperty("--py",y+"px");
    h.style.setProperty("--dx",(Math.random()*220-110).toFixed(0)+"px");
    h.style.setProperty("--dy",(Math.random()*240-140).toFixed(0)+"px");
    h.style.setProperty("--rot",(Math.random()*260-130).toFixed(0)+"deg");
    h.style.setProperty("--ps",(Math.random()*16+14).toFixed(0)+"px");
    document.body.appendChild(h);
    setTimeout(()=>h.remove(),950);
  }
}

/* ---------- Screen shake ---------- */
const card = document.getElementById("card");
function shakeCard(){ card.classList.remove("shake"); void card.offsetWidth; card.classList.add("shake"); setTimeout(()=>card.classList.remove("shake"),240); }

/* ---------- Yes/No logic ---------- */
const yesBtn = document.getElementById("yesBtn");
const noBtn = document.getElementById("noBtn");
const messageEl = document.getElementById("message");
const successBox = document.getElementById("successBox");

let noClicks = 0;
let locked = false;

const noMessages = [
  "We mtoto, finya YES!!! ğŸ˜â˜¹ï¸",
  "Baaaabe... ğŸ™„ğŸ˜",
  "Ni mimi unataka kufanyia hivi? ğŸ˜­ğŸ˜­",
  "Last chance we mtoto ğŸ˜¡ğŸ˜Œ",
  "Uzuri ni mimi naamua ğŸ¤£ğŸ¤£"
];

function registerNoAttempt(){
  if(locked) return;
  noClicks++;
  messageEl.textContent = noMessages[Math.min(noClicks-1, noMessages.length-1)];
  shakeCard();
  if(noClicks >= 5){
    noBtn.style.display = "none";
    yesBtn.style.transform = "scale(1.08)";
    yesBtn.style.filter = "brightness(1.08)";
  }
}

function dodgeNoButton(){
  if(locked || noBtn.style.display === "none") return;
  const prompt = document.querySelector("#stage5 .prompt");
  const pRect = prompt.getBoundingClientRect();
  const bRect = noBtn.getBoundingClientRect();
  const maxX = Math.max(60, Math.min(170, (pRect.width/2) - (bRect.width/2) - 14));
  const maxY = Math.max(30, Math.min(120, (pRect.height/2) - (bRect.height/2) - 14));
  const dx = (Math.random() * 2 - 1) * maxX;
  const dy = (Math.random() * 2 - 1) * maxY;
  noBtn.style.transform = `translate(${dx}px, ${dy}px)`;
}

noBtn.addEventListener("pointerenter", dodgeNoButton);
noBtn.addEventListener("pointerdown", (e) => { registerNoAttempt(); dodgeNoButton(); if(e.pointerType==="touch") e.preventDefault(); });
noBtn.addEventListener("click", () => { registerNoAttempt(); dodgeNoButton(); });

/* ---------- Typing effect ---------- */
const sleep = (ms) => new Promise(r=>setTimeout(r,ms));
function typeText(text, el, speed=28){
  const chars = Array.from(text);
  return new Promise(resolve => {
    let i=0;
    const timer = setInterval(()=>{
      el.append(chars[i]); i++;
      if(i>=chars.length){ clearInterval(timer); resolve(); }
    }, speed);
  });
}
async function typeLines(lines, el, speed=28, linePause=380){
  el.innerHTML="";
  for(let i=0;i<lines.length;i++){
    await typeText(lines[i], el, speed);
    if(i<lines.length-1){ el.appendChild(document.createElement("br")); await sleep(linePause); }
  }
}

yesBtn.addEventListener("click", async (e)=>{
  if(locked) return;
  locked = true;
  heartPop(e.clientX, e.clientY);
  showStage("stage6");
  successBox.innerHTML=`
    <div style="font-weight:900; font-size:20px; margin-bottom:8px;">Itâ€™s a date! ğŸ’˜ğŸ’œ</div>
    <div id="typedMsg" style="color:#f3e9ff; line-height:1.6; font-weight:700;"></div>
  `;
  const lines=[
    "I knew youâ€™d say YES! ğŸ¥ºğŸ’œ",
    "YAAYYYY!! Nilijua tu unanipenda",
    "Happy Valentineâ€™s Day, my love! ğŸŒ¹ğŸ’œ",
    "Ulikuwa unafinya No ndio?? FeilyaaağŸ˜‚ğŸ˜‚"
  ];
  await typeLines(lines, document.getElementById("typedMsg"),26,320);
  setTimeout(()=>heartPop(window.innerWidth*0.5, window.innerHeight*0.35),250);
  setTimeout(()=>heartPop(window.innerWidth*0.35, window.innerHeight*0.55),520);
  setTimeout(()=>heartPop(window.innerWidth*0.65, window.innerHeight*0.55),760);
});
</script>
</body>
</html>
